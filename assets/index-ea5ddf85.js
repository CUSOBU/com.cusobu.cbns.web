import{O as N,w as n,r as i,Q as _,R as C,j as e,G as r,B as A,U as f,V as v,W as y,X as R,p as S,Y as w}from"./index-46aebfb4.js";import{d as I}from"./Add-ca4085eb.js";const $=[{field:"email",headerName:"Usuario",roles:["admin"],flex:1},{field:"identifier",headerName:"Id",width:70},{field:"full_name",headerName:"Nombre",flex:1},{field:"phone_number",numeric:!1,headerName:"TelÃ©fono",flex:1},{field:"cardNumber",headerName:"Tarjeta",flex:1,minWidth:200},{field:"remittance_amount",headerName:"Remesa",flex:1},{field:"remittance_currency",headerName:"Moneda",flex:1},{field:"budget_amount",headerName:"Cobrado",roles:["seller","admin"],flex:1},{field:"operation_cost",headerName:"Cobrado",roles:["seller","admin"],flex:1},{field:"budget_currency",headerName:"Budget Currency",roles:["seller","admin"],flex:1},{field:"status",headerName:"Estado",flex:1},{field:"createdAt",headerName:"Fecha",flex:1},{field:"provider",flex:1,headerName:"Proveedor",roles:["admin","provider"]},{field:"Actions",headerName:"Acciones",type:"actions",width:150,renderCell:N,roles:["provider","admin"]}],P=s=>$.filter(t=>!t.roles||t.roles&&t.roles.includes(s)||t.headerName==="Acciones"),x=({status:s,startDate:t,endDate:l,actions:c})=>{const[p,m]=i.useState(!0),[u,h]=i.useState([]),[g,d]=i.useState(!1),j=new _(C.api_url,localStorage.getItem("token")||""),D=async()=>{try{let a=await j.post("/remittances/filter?page=1&pageSize=20",{status:s,startDate:t,endDate:l});h(a.remittances),m(!1)}catch{m(!1)}};let b=P(sessionStorage.getItem("roles")||"provider");return i.useEffect(()=>{d(!1),D()},[t,l,s,g]),e.jsxs(r,{container:!0,children:[e.jsx(r,{xs:12,sx:{display:{xs:"block",sm:"none"}},children:u.map((a,o)=>e.jsxs(A,{sx:{border:"1px solid #cccccc",my:1,p:1,borderRadius:2},children:[e.jsx("div",{children:`${a.full_name}`}),e.jsx("div",{children:`${a.phone_number}`}),e.jsx("div",{children:a.cardNumber}),e.jsx("div",{children:`$${a.remittance_amount} ${a.remittance_currency} - $${a.budget_amount} ${a.budget_currency}`}),e.jsx("div",{children:`${a.status}`}),e.jsx(f,{row:a,setFetchDataFlag:d})]},o))}),e.jsx(r,{xs:12,sx:{display:{xs:"none",sm:"block"}},children:e.jsx(v,{data:u,columns:b.map(a=>a.field==="Actions"?{...a,renderCell:o=>e.jsx(f,{row:o.row,setFetchDataFlag:d})}:a),loading:p||!1,page:0,pageSize:20,pageSizeOptions:[5,10,20]})})]})};x.propTypes={status:n.array.isRequired,startDate:n.string,endDate:n.string,actions:n.bool};const T=({status:s})=>{const[t,l]=i.useState({startDate:null,endDate:null}),{openDialog:c}=y(w);return e.jsxs(r,{container:!0,spacing:2,maxWidth:"xl",children:[e.jsxs(r,{item:!0,xs:12,display:"flex",alignItems:"center",justifyContent:"space-between",mr:3,children:[e.jsx(R,{startDate:t.startDate,endDate:t.endDate,onDateChange:l}),sessionStorage.getItem("roles")==="seller"&&e.jsx(S,{variant:"contained",size:"small",startIcon:e.jsx(I,{}),onClick:c,children:"Create"})]}),e.jsx(r,{item:!0,xs:12,children:e.jsx(x,{status:s,startDate:t.startDate,endDate:t.endDate})})]})};T.propTypes={status:n.array.isRequired};export{T as default};
